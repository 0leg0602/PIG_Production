<!DOCTYPE html>
<html
    style="background-image: url('https://www.svgrepo.com/show/191136/pig.svg');background-size: 100px;background-color: #1c1c1c;">

<head>
    <meta charset='utf-8'>
    <meta http-equiv='X-UA-Compatible' content='IE=edge'>
    <title>üêñüêñPIG Production üêñüêñ</title>
    <meta name='viewport' content='width=device-width, initial-scale=1'>
    <!-- <link rel='stylesheet' type='text/css' media='screen' href='main.css'> -->
    <!-- <script src='main.js'></script> -->

    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Roboto+Condensed:ital,wght@0,100..900;1,100..900&display=swap"
        rel="stylesheet">

    <style>
        body {
            font-family: "Roboto Condensed", sans-serif;
            font-optical-sizing: auto;
            /* font-weight: <weight>;
            font-style: normal; */

        }

        button {
            min-height: 50px;
            min-width: 120px;
            font-size: 30px;
        }

        h1 {
            color: white;
        }


        @keyframes example {
            0% {
                /* background-color: red; */
                background-position-x: 0px;
            }

            100% {
                /* background-color: yellow; */
                background-position-x: 100px;
            }
        }

        html {
            /* background-color: red; */
            animation-name: example;
            animation-duration: 6s;
            animation-iteration-count: infinite;
            animation-timing-function: linear
        }

        .page {
            position: absolute;
            top: 98px;
            min-height: -webkit-fill-available;
            left: 0px;
            right: 0px;
            backdrop-filter: blur(0px);
        }

        .card_button {
            width: min-content;
            border: 8px solid grey;
            border-radius: 12px;
            border-color: grey;
            background: grey;
        }

        .card_button:hover {
            width: min-content;
            border: 8px solid lightgrey;
            border-radius: 12px;
            border-color: lightgrey;
            background: lightgrey;
        }

        .card_button:active {
            width: min-content;
            border: 8px solid lightgrey;
            border-radius: 12px;
            border-color: lightgrey;
            background: lightgrey;
            filter: contrast(0) brightness(3);
        }
    </style>

</head>

<body>

    <div style="background: black;
    position: fixed;
    width: -webkit-fill-available;
    left: 0px;
    top: 0px;
    color: white;
    z-index: 1;
    ">

        <table style=" width: -webkit-fill-available; margin-left: 20px; margin-right: 20px;">
            <tr>
                <td>
                    <h1 style="align-items: center;display: flex;"> <img
                            src="https://www.svgrepo.com/show/41907/pig.svg"
                            style="max-width: 30px; display: inline-block; "> Pigs –Ø Us
                    </h1>
                </td>
                <td>
                    <h1 style="text-align: end;">
                        <button id="button1" disabled onclick="switch_page(1)"> About </button>
                        <button id="button2" onclick="switch_page(2)"> Pigs </button>
                        <button id="button3" onclick="switch_page(3)"> Pig-Clicker </button>
                        <button id="button4" onclick="switch_page(4)"> Pig-Roulette </button>
                    </h1>
                </td>
            </tr>

        </table>





    </div>

    <div id="div_about" class="page" style="display: block;">


        <h1 style="
    text-align: center;
    font-size: 50px;
    ">About</h1>



    </div>

    <div id="div_pigs" class="page" style="display: none;">


        <h1 style="
    text-align: center;
    font-size: 50px;
    ">Pigs</h1>

        <hr>

        <h1 style="
    text-align: center;
    font-size: 50px;
    ">Your pigs:</h1>

        <table id="owned_pig_list" style="width: 100%;"></table>

        <hr>

        <h1 style="
    text-align: center;
    font-size: 50px;
    ">Avaliable pigs:</h1>

        <table id="pig_list" style="width: 100%;"></table>

    </div>

    <div id="div_pig-clicker" class="page" style="display: none;">


        <h1 style="
    text-align: center;
    font-size: 50px;
    ">Pig-Clicker</h1>
        <table id="owned_pig_list_for_pig_clicker"
            style="position: absolute;top: 0;overflow-y: scroll;bottom: 0;display: block;"></table>
        <div id="div_clicking_pig"
            style="position: absolute;top: 0px;left: 0px;right: 0px;bottom: 0px;text-align: -webkit-center;align-content: center;z-index: -1;">
        </div>

    </div>

    <div id="div_pig-roulette" class="page" style="display: none;">


        <h1 style="
    text-align: center;
    font-size: 50px;
    ">Pig-Roulette</h1>

    </div>



</body>

<script>

    const pig1 = { name: "test1", description: "test pig for development", code: "0319076161392", rarity: "ultra rare"}
    const pig2 = { name: "test2", description: "test pig for development", code: "12345", rarity: "very rare"}
    const pig3 = { name: "test3", description: "test pig for development", code: "12345", rarity: "rare"}
    const pig4 = { name: "test4", description: "test pig for development", code: "12345", rarity: "uncommon"}
    const pig5 = { name: "test5", description: "test pig for development", code: "12345", rarity: "common"}
    const pig6 = { name: "test6", description: "test pig for development", code: "12345", rarity: "common"}
    const pig7 = { name: "test7", description: "test pig for development", code: "12345", rarity: "common"}
    const pig8 = { name: "test8", description: "test pig for development", code: "12345", rarity: "common"}
    const pig9 = { name: "test9", description: "test pig for development", code: "12345", rarity: "common"}
    const pig10 = { name: "test10", description: "test pig for development", code: "12345", rarity: "common"}
    const pig11 = { name: "test11", description: "test pig for development", code: "12345", rarity: "common"}
    const pig12 = { name: "test12", description: "test pig for development", code: "12345", rarity: "common"}
    const pig13 = { name: "test13", description: "test pig for development", code: "12345", rarity: "common"}

    const pigs = [pig1, pig2, pig3, pig4, pig5, pig6, pig7, pig8, pig9, pig10, pig11, pig12, pig13]

    var owned_pig_table2 = document.getElementById("owned_pig_list")



    create_pig_table(document.getElementById("pig_list"), false, false)
    create_pig_table(document.getElementById("owned_pig_list"), true, false)
    create_pig_table(document.getElementById("owned_pig_list_for_pig_clicker"), true, true)




    function create_pig_table(pig_table, is_owned_pig_list, for_pig_clicker) {



        pig_table.replaceChildren()

        element_number = 0;

        var pigs_list;

        if (is_owned_pig_list) {
            pigs_list = JSON.parse(localStorage.getItem("pigs"));

            if (!pigs_list || pigs_list.length == 0) {

                localStorage.setItem("pigs", "[]")

                if (for_pig_clicker) {
                    return;
                }


                var tr1 = document.createElement("tr");
                var td1 = document.createElement("td");

                td1.style = "text-align: center;";

                var label = document.createElement("h1");
                label.textContent = "You currently have no pigs. Claim a pig to add it to your collection.";


                pig_table.appendChild(tr1);
                tr1.appendChild(td1);
                td1.appendChild(label);

            }


        } else {
            pigs_list = pigs;
        }

        for (const i in pigs_list) {

            var create_element = true;

            if (!is_owned_pig_list) {
                for (const i2 in JSON.parse(localStorage.getItem("pigs"))) {
                    if (pigs_list[i].name == JSON.parse(localStorage.getItem("pigs"))[i2].name) {
                        create_element = false;
                    }
                }
            }


            if (create_element) {

                var table_row;
                var number_of_rows;

                if (for_pig_clicker) {
                    number_of_rows = 1;
                } else {
                    number_of_rows = 3;
                }

                if (!document.getElementById(pig_table.id + "_table_row" + Math.floor(element_number / number_of_rows))) {
                    table_row = document.createElement("tr");
                    table_row.id = pig_table.id + "_table_row" + Math.floor(element_number / number_of_rows);
                } else {
                    table_row = document.getElementById(pig_table.id + "_table_row" + Math.floor(element_number / number_of_rows));
                }

                element_number++;

                var table_date = document.createElement("td");

                table_date.style = "text-align: -webkit-center; padding-bottom :11px"
                var card_div = document.createElement("div");
                if (for_pig_clicker) {
                    card_div.addEventListener('click', function () {
                        set_pig_clicker_pig(pigs_list[i]);
                    });
                    card_div.className = "card_button";
                } else {

                    var color1;
                    var color2;
                    var out_line_color;
                    switch (pigs_list[i].rarity) {
                        case "common":
                            color1 = "grey"
                            color2 = "grey"
                            out_line_color = "black"

                            break;
                        case "uncommon":
                            color1 = "darkkhaki"
                            color2 = "#b7b167"
                            out_line_color = "black"

                            break;
                        case "rare":
                            color1 = "green"
                            color2 = "#008b00"
                            out_line_color = "black"

                            break;
                        case "very rare":
                            color1 = "darkmagenta"
                            color2 = "#ad00ad"
                            out_line_color = "white"

                            break;
                        case "ultra rare":
                            color1 = "maroon"
                            color2 = "#a90020"
                            out_line_color = "white"

                            break;
                        default:
                            color1 = "grey"
                            color2 = "grey"
                            break;
                    }

                    card_div.style = "width: min-content; border: 8px solid "+ color1 +"; border-radius: 12px; background: repeating-linear-gradient(45deg, " + color1 + ", " + color2 + " 100px);"
                }

                pig_table.appendChild(table_row);
                table_row.appendChild(table_date);

                var img = document.createElement("img");
                img.src = "pigs_pictures/" + pigs_list[i].name + ".jpg";
                img.setAttribute('draggable', false);

                

                var pig_name = document.createElement("h1");
                var pig_rarity = document.createElement("h1");
                var pig_description = document.createElement("p");

                var claim_a_pig_button

                if (!is_owned_pig_list) {
                    claim_a_pig_button = document.createElement("button");
                    claim_a_pig_button.textContent = "CLAIM THE PIG";
                    claim_a_pig_button.addEventListener('click', function () {
                        claim_a_pig(pigs_list[i]);
                    });
                }

                pig_name.textContent = pigs_list[i].name;
                pig_rarity.textContent = pigs_list[i].rarity;
                pig_rarity.style.color = color1;
                pig_rarity.style.textShadow = "-1px -1px 0 " + out_line_color + ", 1px -1px 0 " + out_line_color + ", -1px 1px 0 " + out_line_color + ", 1px 1px 0 " + out_line_color + ""
                pig_description.textContent = pigs_list[i].description;

                table_date.appendChild(card_div);
                card_div.appendChild(img);
                card_div.appendChild(pig_name);
                card_div.appendChild(pig_rarity);
                card_div.appendChild(pig_description);
                if (!is_owned_pig_list) {
                    card_div.appendChild(claim_a_pig_button);
                }

            }


        }
    }





    function switch_page(page) {
        switch (page) {
            case 1:
                document.getElementById("div_about").style.display = "block";
                document.getElementById("div_pigs").style.display = "none";
                document.getElementById("div_pig-clicker").style.display = "none";
                document.getElementById("div_pig-roulette").style.display = "none";


                document.getElementById("button1").disabled = true;
                document.getElementById("button2").disabled = false;
                document.getElementById("button3").disabled = false;
                document.getElementById("button4").disabled = false;

                document.querySelector("html").style.overflow = "auto"



                break;
            case 2:
                document.getElementById("div_about").style.display = "none";
                document.getElementById("div_pigs").style.display = "block";
                document.getElementById("div_pig-clicker").style.display = "none";
                document.getElementById("div_pig-roulette").style.display = "none";


                document.getElementById("button1").disabled = false;
                document.getElementById("button2").disabled = true;
                document.getElementById("button3").disabled = false;
                document.getElementById("button4").disabled = false;

                document.querySelector("html").style.overflow = "auto"

                break;
            case 3:

                document.getElementById("div_about").style.display = "none";
                document.getElementById("div_pigs").style.display = "none";
                document.getElementById("div_pig-clicker").style.display = "block";
                document.getElementById("div_pig-roulette").style.display = "none";


                document.getElementById("button1").disabled = false;
                document.getElementById("button2").disabled = false;
                document.getElementById("button3").disabled = true;
                document.getElementById("button4").disabled = false;

                document.querySelector("html").style.overflow = "hidden"

                break;
            case 4:

                document.getElementById("div_about").style.display = "none";
                document.getElementById("div_pigs").style.display = "none";
                document.getElementById("div_pig-clicker").style.display = "none";
                document.getElementById("div_pig-roulette").style.display = "block";

                document.getElementById("button1").disabled = false;
                document.getElementById("button2").disabled = false;
                document.getElementById("button3").disabled = false;
                document.getElementById("button4").disabled = true;

                document.querySelector("html").style.overflow = "auto"

                break;
            

            default:
                break;
        }
    }

    function claim_a_pig(pig_to_claim) {
        let pig_code = prompt("Enter the pig code:");
        if (pig_code == pig_to_claim.code) {

            var parsedLocalPigs = JSON.parse(localStorage.getItem("pigs"));
            parsedLocalPigs[parsedLocalPigs.length] = pig_to_claim;
            localStorage.setItem("pigs", JSON.stringify(parsedLocalPigs));

            create_pig_table(document.getElementById("pig_list"), false)
            create_pig_table(document.getElementById("owned_pig_list"), true)
            create_pig_table(document.getElementById("owned_pig_list_for_pig_clicker"), true, true)

            // localStorage.pigs[localStorage.pigs.lenght] = JSON.stringify(pig_to_claim);
        } else {
            alert("Wrond code");
        }
    }

    function set_pig_clicker_pig(pig_to_set) {
        div_clicking_pig = document.getElementById("div_clicking_pig");

        div_clicking_pig.replaceChildren()

        var pig_name = document.createElement("h1");
        pig_name.textContent = pig_to_set.name;

        
        var div_pig_holder = document.createElement("div");
        div_pig_holder.style = "width: 400px;height: 400px;border: 8px solid grey;border-radius: 12px;background: grey;"

        var pig_img = document.createElement("img");

        pig_img.src = "pigs_pictures/" + pig_to_set.name + ".jpg";
        pig_img.setAttribute('draggable', false);
        
        div_clicking_pig.appendChild(pig_name);
        div_clicking_pig.appendChild(div_pig_holder);
        div_pig_holder.appendChild(pig_img);
        
        
    }


</script>

</html>